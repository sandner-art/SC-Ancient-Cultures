<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Regular Polygons in π/6 Unit System</title>
    <style>
        body {
            font-family: 'Georgia', serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #2c3e50;
            transition: all 0.3s ease;
        }
        
        body.dark-mode {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: #ecf0f1;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }
        
        .dark-mode .container {
            background: #34495e;
            color: #ecf0f1;
        }
        
        .dark-mode table {
            background: #2c3e50;
            color: #ecf0f1;
        }
        
        .dark-mode th {
            background: linear-gradient(135deg, #34495e 0%, #2c3e50 100%);
        }
        
        .dark-mode svg {
            background: #2c3e50;
        }
        
        .dark-mode .diagram-section {
            background: #34495e;
            border-color: #2c3e50;
        }
        
        .dark-mode .table-section {
            background: #34495e;
            border-color: #2c3e50;
        }
        
        .dark-mode .insights {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
        }
        
        .dark-mode .highlight-box {
            background: #2c3e50;
            color: #ecf0f1;
        }
        
        .dark-mode h1 {
            color: #ecf0f1;
        }
        
        .dark-mode-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 50px;
            cursor: pointer;
            z-index: 1000;
            transition: all 0.3s ease;
        }
        
        .dark-mode-toggle:hover {
            background: #2980b9;
            transform: scale(1.05);
        }
        
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
            font-size: 2.2em;
        }
        
        .controls {
            text-align: center;
            margin: 20px 0;
        }
        
        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 1em;
            cursor: pointer;
            margin: 0 10px;
            transition: transform 0.2s ease;
        }
        
        button:hover {
            transform: translateY(-2px);
        }
        
        button.active {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        }
        
        .table-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            border: 2px solid #e9ecef;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 16px rgba(0,0,0,0.1);
            font-size: 0.9em;
        }
        
        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 8px;
            text-align: center;
            font-weight: bold;
            font-size: 0.95em;
        }
        
        td {
            padding: 10px 8px;
            text-align: center;
            border-bottom: 1px solid #ecf0f1;
            font-size: 0.9em;
        }
        
        tr:hover {
            background: #f8f9fa;
        }
        
        .polygon-name {
            background: #e8f4fd;
            font-weight: bold;
            color: #2c5aa0;
        }
        
        .special-ratio {
            background: #fff3cd;
            font-weight: bold;
            color: #856404;
        }
        
        .visualization-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 30px 0;
        }
        
        .diagram-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            border: 2px solid #e9ecef;
        }
        
        .diagram-title {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
            color: #495057;
        }
        
        svg {
            width: 100%;
            height: 400px;
            background: white;
            border-radius: 10px;
            border: 1px solid #dee2e6;
        }
        
        .insights {
            background: linear-gradient(135deg, #e8f5e8 0%, #f0f8f0 100%);
            padding: 25px;
            border-radius: 15px;
            margin-top: 30px;
            border-left: 5px solid #28a745;
        }
        
        .highlight-box {
            background: #fff3cd;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 4px solid #ffc107;
        }
        
        .polygon-selector {
            margin: 20px 0;
            text-align: center;
        }
        
        .polygon-selector label {
            margin: 0 15px;
            font-weight: bold;
        }
        
        input[type="range"] {
            width: 200px;
            margin: 10px;
        }
        
        @media (max-width: 1000px) {
            .visualization-grid {
                grid-template-columns: 1fr !important;
            }
            
            table {
                font-size: 0.8em;
            }
            
            th, td {
                padding: 8px 4px;
            }
        }
    </style>
</head>
<body>
    <button class="dark-mode-toggle" onclick="toggleDarkMode()">🌙</button>
    <div class="container">
        <h1>Regular Polygons in π/6 Unit System</h1>
        <p style="text-align: center; font-style: italic; color: #666;">
            Exploring the beautiful relationships between circles and regular polygons using π/6 as our base unit
        </p>
        
        <div class="controls">
            <button id="btn-table" class="active" onclick="showSection('table')">Data Tables</button>
            <button id="btn-visual" onclick="showSection('visual')">Interactive Visualization</button>
            <button id="btn-ratios" onclick="showSection('ratios')">Special Ratios</button>
        </div>
        
        <div id="table-section" class="table-section">
            <h3 style="text-align: center; margin-bottom: 20px;">Inscribed Regular Polygons in Circles (π/6 Units)</h3>
            <div style="overflow-x: auto;">
                <table id="polygon-table">
                    <thead>
                        <tr>
                            <th>Polygon</th>
                            <th>Sides (n)</th>
                            <th>Circle Circum.</th>
                            <th>Circle Radius</th>
                            <th>Side Length</th>
                            <th>Side/Radius</th>
                            <th>Perimeter</th>
                            <th>Perimeter/Circum.</th>
                            <th>Special Notes</th>
                        </tr>
                    </thead>
                    <tbody id="table-body">
                    </tbody>
                </table>
            </div>
        </div>
        
        <div id="visual-section" class="visualization-grid" style="display: none; grid-template-columns: 1fr;">
            <div class="diagram-section">
                <div class="diagram-title">Interactive Polygon Visualization</div>
                <div class="polygon-selector">
                    <label>Number of sides: <span id="sides-display">6</span></label><br>
                    <input type="range" id="sides-slider" min="3" max="12" value="6" oninput="updateVisualization()">
                    <br><br>
                    <label>
                        <input type="radio" name="size-mode" value="circumference" checked onchange="updateSizeMode()"> Circumference
                        <input type="radio" name="size-mode" value="radius" onchange="updateSizeMode()"> Radius
                    </label><br>
                    <label>Circle size: <span id="size-display">6</span> units <span id="size-unit">circumference</span></label><br>
                    <input type="range" id="size-slider" min="1" max="12" step="1" value="6" oninput="updateVisualization()">
                    <br><br>
                    <label>
                        <input type="checkbox" id="show-star" onchange="updateVisualization()"> Show Star Polygons (Pentagram, Hexagram, etc.)
                    </label>
                    <div id="radius-help" style="font-size: 0.8em; color: #666; margin-top: 5px; display: none;">
                        Common fractions: 1/12, 1/6, 1/4, 1/3, 1/2, 2/3, 3/4, 1, 4/3, 3/2
                    </div>
                </div>
                <svg id="main-svg" viewBox="0 0 400 400">
                </svg>
                <div id="measurements" style="margin-top: 15px; font-size: 0.9em;">
                </div>
            </div>
            
            <div class="visualization-grid" style="grid-template-columns: 1fr 1fr 1fr; gap: 20px; margin-top: 30px;">
                <div class="diagram-section">
                    <div class="diagram-title">1. Same Circle (Inscribed)</div>
                    <svg id="comparison-inscribed" viewBox="0 0 400 400">
                    </svg>
                </div>
                
                <div class="diagram-section">
                    <div class="diagram-title">2. Same Side Length</div>
                    <div style="text-align: center; margin-bottom: 10px;">
                        <label style="font-size: 0.9em;">
                            <input type="radio" name="alignment-mode" value="center" checked onchange="updateVisualization()"> Center Aligned
                            <input type="radio" name="alignment-mode" value="vertex" onchange="updateVisualization()"> Top Vertex Aligned
                        </label>
                    </div>
                    <svg id="comparison-sides" viewBox="0 0 400 400">
                    </svg>
                </div>
                
                <div class="diagram-section">
                    <div class="diagram-title">3. Same Area</div>
                    <svg id="comparison-area" viewBox="0 0 400 400">
                    </svg>
                </div>
            </div>
            
            <div id="star-polygon-table" class="table-section" style="margin-top: 30px;">
                <h3 style="text-align: center; margin-bottom: 20px;">Star Polygon Properties and Ratios</h3>
                <div style="overflow-x: auto;">
                    <table id="star-table">
                        <thead>
                            <tr>
                                <th>Polygon</th>
                                <th>Star Pattern</th>
                                <th>Connection Rule</th>
                                <th>Star Edge Length</th>
                                <th>Star/Side Ratio</th>
                                <th>Golden Ratio (φ)</th>
                                <th>Special Properties</th>
                            </tr>
                        </thead>
                        <tbody id="star-table-body">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <div id="ratios-section" style="display: none;">
            <div class="insights">
                <h3>Beautiful Geometric Relationships in π/6 System</h3>
                
                <div class="highlight-box">
                    <strong>🔺 Triangle (3 sides):</strong><br>
                    • Side length = radius × √3 ≈ 1.732 × radius<br>
                    • Perimeter ≈ 0.827 × circumference<br>
                    • The triangle's perimeter is always less than the circle's circumference
                </div>
                
                <div class="highlight-box">
                    <strong>🔲 Square (4 sides):</strong><br>
                    • Side length = radius × √2 ≈ 1.414 × radius<br>
                    • Perimeter ≈ 0.900 × circumference<br>
                    • Almost 90% of the circle's circumference!
                </div>
                
                <div class="highlight-box">
                    <strong>⬟ Pentagon (5 sides):</strong><br>
                    • Side length = radius × 1.176<br>
                    • Perimeter ≈ 0.940 × circumference<br>
                    • Getting very close to the circle
                </div>
                
                <div class="highlight-box" style="background: #fce4ec; border-left-color: #e91e63;">
                    <strong>🎯 Second Vertex Curve Discovery:</strong><br>
                    • When polygons with equal side length s are aligned by their top vertex<br>
                    • Their second vertices trace a <strong>perfect circle</strong><br>
                    • Circle radius = s (the side length itself, not s/2!)<br>
                    • ✨ Beautiful geometric invariant across all polygon types ✨
                </div>
                
                <div class="highlight-box">
                    <strong>⭐ Pentagon + Pentagram (5 sides) - GOLDEN RATIO!</strong><br>
                    • Regular side length = radius × 1.176<br>
                    • Pentagram diagonal = radius × φ (golden ratio ≈ 1.618)<br>
                    • Contains the golden ratio in multiple relationships<br>
                    • Foundation of classical architectural proportions
                </div>
                
                <div class="highlight-box">
                    <strong>✡️ Hexagon + Hexagram (6 sides) - SPECIAL!</strong><br>
                    • Side length = radius × 1.000 (exactly!)<br>
                    • Hexagram (Star of David) diagonal = radius × √3 ≈ 1.732<br>
                    • ✨ The hexagon side equals the circle radius! ✨<br>
                    • Perfect for compass and straightedge construction
                </div>
                
                <div class="highlight-box">
                    <strong>⬢ Octagon (8 sides):</strong><br>
                    • Side length = radius × 0.765<br>
                    • Perimeter ≈ 0.980 × circumference<br>
                    • Very close approximation to the circle
                </div>
                
                <div class="highlight-box">
                    <strong>🔟 Decagon (10 sides):</strong><br>
                    • Side length = radius × 0.618 (≈ Golden ratio conjugate!)<br>
                    • Perimeter ≈ 0.988 × circumference<br>
                    • Connection to the golden ratio φ
                </div>
                
                <div class="highlight-box">
                    <strong>⬢ Dodecagon (12 sides):</strong><br>
                    • Side length = radius × 0.518<br>
                    • Perimeter ≈ 0.993 × circumference<br>
                    • Excellent circle approximation for ancient builders!
                </div>
            </div>
        </div>
    </div>

    <script>
        // Mathematical constants and functions
        const polygonNames = {
            3: 'Triangle', 4: 'Square', 5: 'Pentagon', 6: 'Hexagon',
            7: 'Heptagon', 8: 'Octagon', 9: 'Nonagon', 10: 'Decagon',
            11: 'Hendecagon', 12: 'Dodecagon'
        };
        
        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            const toggle = document.querySelector('.dark-mode-toggle');
            toggle.textContent = document.body.classList.contains('dark-mode') ? '☀️' : '🌙';
        }
        
        function drawPolygon(cx, cy, radius, sides, color, strokeWidth) {
            let path = '';
            for (let i = 0; i <= sides; i++) {
                const angle = (i * 2 * Math.PI) / sides - Math.PI/2;
                const x = cx + radius * Math.cos(angle);
                const y = cy + radius * Math.sin(angle);
                path += (i === 0 ? `M ${x} ${y}` : ` L ${x} ${y}`);
            }
            
            return `<path d="${path}" fill="none" stroke="${color}" stroke-width="${strokeWidth}"/>`;
        }
        
        function drawStarPolygon(cx, cy, radius, sides, color, strokeWidth) {
            if (sides < 5) return ''; // No star for triangle or square
            
            // Define the step pattern for each polygon type
            let step;
            switch(sides) {
                case 5: step = 2; break;  // pentagram: every 2nd vertex
                case 6: step = 2; break;  // hexagram: every 2nd vertex (creates two triangles)
                case 7: step = 2; break;  // heptagram: every 2nd vertex
                case 8: step = 3; break;  // octagram: every 3rd vertex
                case 9: step = 2; break;  // enneagram: every 2nd vertex
                case 10: step = 3; break; // decagram: every 3rd vertex
                case 11: step = 2; break; // hendecagram: every 2nd vertex
                case 12: step = 5; break; // dodecagram: every 5th vertex
                default: step = 2; break;
            }
            
            let allPaths = [];
            const visited = new Array(sides).fill(false);
            
            // Start from each unvisited vertex to capture all parts of compound stars
            for (let startVertex = 0; startVertex < sides; startVertex++) {
                if (visited[startVertex]) continue;
                
                let path = '';
                let currentVertex = startVertex;
                let pathVertices = [];
                
                // Trace one complete path
                do {
                    visited[currentVertex] = true;
                    pathVertices.push(currentVertex);
                    
                    const angle = (currentVertex * 2 * Math.PI) / sides - Math.PI/2;
                    const x = cx + radius * Math.cos(angle);
                    const y = cy + radius * Math.sin(angle);
                    
                    if (path === '') {
                        path = `M ${x} ${y}`;
                    } else {
                        path += ` L ${x} ${y}`;
                    }
                    
                    currentVertex = (currentVertex + step) % sides;
                } while (currentVertex !== startVertex && !visited[currentVertex]);
                
                // Close the path for this part of the star
                if (pathVertices.length > 2) {
                    path += ' Z';
                    allPaths.push(path);
                }
            }
            
            // Combine all paths into a single SVG element
            const combinedPath = allPaths.join(' ');
            return `<path d="${combinedPath}" fill="none" stroke="${color}" stroke-width="${strokeWidth}" stroke-dasharray="3,2" opacity="0.8"/>`;
        }
        
        function generateTable() {
            const tbody = document.getElementById('table-body');
            tbody.innerHTML = '';
            
            // Generate data for different circle sizes and polygon types
            const circleSizes = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]; // circumference in π/6 units
            
            for (let sides = 3; sides <= 12; sides++) {
                for (let circum of circleSizes) {
                    const radius = circum / 12; // In π/6 units
                    const sideLength = 2 * radius * Math.sin(Math.PI / sides);
                    const sideToRadius = sideLength / radius;
                    const perimeter = sides * sideLength;
                    const perimeterRatio = perimeter / circum;
                    
                    const row = document.createElement('tr');
                    
                    // Special highlighting for interesting cases
                    let specialNote = '';
                    
                    if (sides === 6) {
                        specialNote = 'Side = Radius!';
                    } else if (sides === 4 && Math.abs(perimeterRatio - 0.9) < 0.01) {
                        specialNote = '90% of circumference';
                    } else if (sides === 10) {
                        specialNote = 'Golden ratio relation';
                    } else if (sides === 3) {
                        specialNote = 'Minimum sides';
                    } else if (sides === 12) {
                        specialNote = 'Excellent circle approx.';
                    }
                    
                    // Convert radius to clean fraction if possible
                    const radiusDisplay = getCleanFraction(radius);
                    
                    row.innerHTML = `
                        <td class="polygon-name">${polygonNames[sides]}</td>
                        <td>${sides}</td>
                        <td>${circum}</td>
                        <td class="special-ratio">${radiusDisplay}</td>
                        <td>${sideLength.toFixed(4)}</td>
                        <td class="${sides === 6 ? 'special-ratio' : ''}">${sideToRadius.toFixed(3)}</td>
                        <td>${perimeter.toFixed(4)}</td>
                        <td>${perimeterRatio.toFixed(3)}</td>
                        <td class="${specialNote ? 'special-ratio' : ''}">${specialNote}</td>
                    `;
                    
                    tbody.appendChild(row);
                }
            }
        }
        
        function getCleanFraction(decimal) {
            // Common fractions that appear in our π/6 system
            const fractions = [
                {value: 1/12, display: '1/12'},
                {value: 1/6, display: '1/6'},
                {value: 1/4, display: '1/4'},
                {value: 1/3, display: '1/3'},
                {value: 5/12, display: '5/12'},
                {value: 1/2, display: '1/2'},
                {value: 7/12, display: '7/12'},
                {value: 2/3, display: '2/3'},
                {value: 3/4, display: '3/4'},
                {value: 5/6, display: '5/6'},
                {value: 11/12, display: '11/12'},
                {value: 1, display: '1'}
            ];
            
            for (let frac of fractions) {
                if (Math.abs(decimal - frac.value) < 0.0001) {
                    return frac.display;
                }
            }
            
            return decimal.toFixed(4);
        }
        
        function showSection(section) {
            // Hide all sections
            document.getElementById('table-section').style.display = 'none';
            document.getElementById('visual-section').style.display = 'none';
            document.getElementById('ratios-section').style.display = 'none';
            
            // Show selected section
            if (section === 'table') {
                document.getElementById('table-section').style.display = 'block';
                generateTable();
            } else if (section === 'visual') {
                document.getElementById('visual-section').style.display = 'block';
                updateVisualization();
                generateStarPolygonTable();
            } else if (section === 'ratios') {
                document.getElementById('ratios-section').style.display = 'block';
            }
            
            // Update button states
            document.querySelectorAll('button').forEach(btn => btn.classList.remove('active'));
            document.getElementById(`btn-${section}`).classList.add('active');
        }
        
        function updateSizeMode() {
            const mode = document.querySelector('input[name="size-mode"]:checked').value;
            const slider = document.getElementById('size-slider');
            const helpText = document.getElementById('radius-help');
            
            document.getElementById('size-unit').textContent = mode;
            
            if (mode === 'radius') {
                // Set up radius mode with predefined clean fractions
                const radiusFractions = [
                    {value: 1/12, display: '1/12'},
                    {value: 1/6, display: '1/6'},
                    {value: 1/4, display: '1/4'},
                    {value: 1/3, display: '1/3'},
                    {value: 5/12, display: '5/12'},
                    {value: 1/2, display: '1/2'},
                    {value: 7/12, display: '7/12'},
                    {value: 2/3, display: '2/3'},
                    {value: 3/4, display: '3/4'},
                    {value: 5/6, display: '5/6'},
                    {value: 11/12, display: '11/12'},
                    {value: 1, display: '1'},
                    {value: 4/3, display: '4/3'},
                    {value: 3/2, display: '3/2'},
                    {value: 5/3, display: '5/3'},
                    {value: 2, display: '2'}
                ];
                
                slider.min = '0';
                slider.max = String(radiusFractions.length - 1);
                slider.step = '1';
                
                // Convert current circumference value to closest radius index
                const currentCircum = parseFloat(slider.value);
                const currentRadius = currentCircum / 12;
                let closestIndex = 0;
                let closestDiff = Math.abs(currentRadius - radiusFractions[0].value);
                
                for (let i = 1; i < radiusFractions.length; i++) {
                    const diff = Math.abs(currentRadius - radiusFractions[i].value);
                    if (diff < closestDiff) {
                        closestDiff = diff;
                        closestIndex = i;
                    }
                }
                
                slider.value = String(closestIndex);
                helpText.style.display = 'block';
                
                // Store fractions for use in updateVisualization
                slider.radiusFractions = radiusFractions;
                
            } else {
                // Circumference mode
                slider.min = '1';
                slider.max = '12';
                slider.step = '1';
                helpText.style.display = 'none';
                
                // Convert radius index back to circumference
                if (slider.radiusFractions) {
                    const radiusIndex = parseInt(slider.value);
                    const radiusValue = slider.radiusFractions[radiusIndex].value;
                    slider.value = String(Math.round(radiusValue * 12));
                    delete slider.radiusFractions;
                }
            }
            
            updateVisualization();
        }
        
        function updateVisualization() {
            const sides = parseInt(document.getElementById('sides-slider').value);
            const slider = document.getElementById('size-slider');
            const mode = document.querySelector('input[name="size-mode"]:checked').value;
            
            let circum, sizeValue, displayValue;
            
            if (mode === 'radius' && slider.radiusFractions) {
                // Radius mode - use predefined fractions
                const radiusIndex = parseInt(slider.value);
                const radiusFraction = slider.radiusFractions[radiusIndex];
                sizeValue = radiusFraction.value;
                displayValue = radiusFraction.display;
                circum = sizeValue * 12; // C = 12r in π/6 units
            } else {
                // Circumference mode
                sizeValue = parseInt(slider.value);
                displayValue = sizeValue;
                circum = sizeValue;
            }
            
            document.getElementById('sides-display').textContent = sides;
            document.getElementById('size-display').textContent = displayValue;
            
            drawMainPolygon(sides, circum, mode, sizeValue);
            if (document.getElementById('comparison-inscribed')) {
                drawInscribedComparison();
                drawSameSideComparison();
                drawSameAreaComparison();
            }
            updateMeasurements(sides, circum, mode, sizeValue);
        }
        
        function drawMainPolygon(sides, circum) {
            const svg = document.getElementById('main-svg');
            const radius = circum / 12 * 80; // Scale for display
            const centerX = 200, centerY = 200;
            const showStar = document.getElementById('show-star')?.checked || false;
            
            let starPolygonContent = '';
            if (showStar && sides >= 5) {
                starPolygonContent = drawStarPolygon(centerX, centerY, radius, sides, '#9b59b6', 2);
            }
            
            svg.innerHTML = `
                <defs>
                    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                        <polygon points="0 0, 10 3.5, 0 7" fill="#e74c3c" />
                    </marker>
                </defs>
                
                <!-- Circle -->
                <circle cx="${centerX}" cy="${centerY}" r="${radius}" 
                        fill="rgba(52, 152, 219, 0.1)" stroke="#3498db" stroke-width="2"/>
                
                <!-- Star Polygon (if enabled, drawn first so it's behind) -->
                ${starPolygonContent}
                
                <!-- Regular Polygon -->
                ${drawPolygon(centerX, centerY, radius, sides, '#e74c3c', 3)}
                
                <!-- Radius line -->
                <line x1="${centerX}" y1="${centerY}" 
                      x2="${centerX + radius}" y2="${centerY}" 
                      stroke="#27ae60" stroke-width="2" marker-end="url(#arrow)"/>
                
                <!-- Labels -->
                <text x="${centerX + radius/2}" y="${centerY - 10}" 
                      text-anchor="middle" font-family="Georgia" font-size="12" fill="#27ae60" font-weight="bold">
                      r = ${(circum/12).toFixed(3)} units
                </text>
                
                <text x="${centerX}" y="30" text-anchor="middle" 
                      font-family="Georgia" font-size="14" font-weight="bold" fill="#2c3e50">
                      ${polygonNames[sides]} in Circle ${showStar && sides >= 5 ? '+ Star' : ''}
                </text>
                
                <text x="${centerX}" y="50" text-anchor="middle" 
                      font-family="Georgia" font-size="12" fill="#666">
                      Circumference = ${circum} π/6 units
                </text>
            `;
        }
        
        function drawInscribedComparison() {
            const svg = document.getElementById('comparison-inscribed');
            if (!svg) return; // Safety check
            
            const centerX = 200, centerY = 200;
            const baseRadius = 80; // Fixed radius for all polygons
            
            // Show triangle through octagon - all inscribed in same circle
            const polygons = [
                {sides: 3, color: '#e74c3c'},
                {sides: 4, color: '#f39c12'},
                {sides: 5, color: '#9b59b6'},
                {sides: 6, color: '#27ae60'},
                {sides: 7, color: '#3498db'},
                {sides: 8, color: '#e67e22'}
            ];
            
            let content = `
                <text x="200" y="25" text-anchor="middle" 
                      font-family="Georgia" font-size="12" font-weight="bold" fill="#2c3e50">
                      All Inscribed in Same Circle
                </text>
                <text x="200" y="40" text-anchor="middle" 
                      font-family="Georgia" font-size="10" fill="#666">
                      Radius = 2/3 π/6 units
                </text>
            `;
            
            // Base circle - same for all polygons
            content += `<circle cx="${centerX}" cy="${centerY}" r="${baseRadius}" 
                        fill="rgba(52, 152, 219, 0.1)" stroke="#3498db" stroke-width="2"/>`;
            
            // Draw all polygons with the same radius (truly inscribed)
            polygons.forEach((poly, index) => {
                content += drawPolygon(centerX, centerY, baseRadius, poly.sides, poly.color, 2);
            });
            
            // Compact legend at bottom
            let legendX = 30;
            polygons.forEach((poly, index) => {
                content += `
                    <circle cx="${legendX}" cy="370" r="4" fill="${poly.color}"/>
                    <text x="${legendX + 10}" y="374" font-family="Georgia" font-size="9" fill="${poly.color}" font-weight="bold">
                        ${poly.sides}
                    </text>
                `;
                legendX += 40;
            });
            
            content += `
                <text x="200" y="390" text-anchor="middle" font-family="Georgia" font-size="9" fill="#666">
                    Different perimeters, same circumradius
                </text>
            `;
            
            svg.innerHTML = content;
        }
        
        function drawSameSideComparison() {
            const svg = document.getElementById('comparison-sides');
            if (!svg) return; // Safety check
            
            const alignmentMode = document.querySelector('input[name="alignment-mode"]:checked')?.value || 'center';
            const fixedSideLength = 0.5; // π/6 units
            
            const polygons = [
                {sides: 3, color: '#e74c3c'},
                {sides: 4, color: '#f39c12'},
                {sides: 5, color: '#9b59b6'},
                {sides: 6, color: '#27ae60'},
                {sides: 7, color: '#3498db'},
                {sides: 8, color: '#e67e22'},
                {sides: 9, color: '#1abc9c'},
                {sides: 10, color: '#e91e63'},
                {sides: 11, color: '#34495e'},
                {sides: 12, color: '#f1c40f'}
            ];
            
            let content = `
                <text x="200" y="25" text-anchor="middle" 
                      font-family="Georgia" font-size="12" font-weight="bold" fill="#2c3e50">
                      Same Side Length (3-12 sides)
                </text>
                <text x="200" y="40" text-anchor="middle" 
                      font-family="Georgia" font-size="10" fill="#666">
                      Each side = 1/2 π/6 unit (${alignmentMode === 'vertex' ? 'top vertex aligned' : 'center aligned'})
                </text>
            `;
            
            let secondVertexPoints = []; // Store second vertex positions for curve tracing
            
            // Draw polygons with same side length
            polygons.forEach((poly, index) => {
                // Calculate radius for given side length
                const radius = fixedSideLength / (2 * Math.sin(Math.PI / poly.sides));
                const displayRadius = radius * 120; // Scale for display
                
                let centerX, centerY;
                
                if (alignmentMode === 'vertex') {
                    // Align by top vertex - all top vertices at same point
                    const topVertexX = 200;
                    const topVertexY = 100;
                    
                    // Calculate center position to place top vertex at desired location
                    centerX = topVertexX;
                    centerY = topVertexY + displayRadius;
                    
                    // Calculate second vertex position for curve tracing
                    const secondVertexAngle = -Math.PI/2 + (2 * Math.PI / poly.sides);
                    const secondVertexX = centerX + displayRadius * Math.cos(secondVertexAngle);
                    const secondVertexY = centerY + displayRadius * Math.sin(secondVertexAngle);
                    secondVertexPoints.push({x: secondVertexX, y: secondVertexY, sides: poly.sides});
                } else {
                    // Center aligned (original behavior)
                    centerX = 200;
                    centerY = 200;
                }
                
                content += drawPolygon(centerX, centerY, displayRadius, poly.sides, poly.color, 2);
            });
            
            // If vertex aligned, show the curve traced by second vertices
            if (alignmentMode === 'vertex' && secondVertexPoints.length > 1) {
                // Draw curve through second vertices
                let pathData = `M ${secondVertexPoints[0].x} ${secondVertexPoints[0].y}`;
                for (let i = 1; i < secondVertexPoints.length; i++) {
                    pathData += ` L ${secondVertexPoints[i].x} ${secondVertexPoints[i].y}`;
                }
                
                content += `
                    <path d="${pathData}" fill="none" stroke="#8e44ad" stroke-width="2" stroke-dasharray="5,3"/>
                    <text x="320" y="150" font-family="Georgia" font-size="9" fill="#8e44ad" font-weight="bold">
                        Second vertex curve
                    </text>
                `;
                
                // Mark the second vertices
                secondVertexPoints.forEach(point => {
                    content += `<circle cx="${point.x}" cy="${point.y}" r="3" fill="#8e44ad"/>`;
                });
            }
            
            // Compact legend at bottom - two rows for better fit
            content += `<text x="200" y="360" text-anchor="middle" font-family="Georgia" font-size="10" font-weight="bold" fill="#2c3e50">
                        Polygon Types:
                    </text>`;
            
            // First row: 3-7 sides
            let legendX = 20;
            for (let i = 0; i < 5; i++) {
                const poly = polygons[i];
                content += `
                    <circle cx="${legendX}" cy="375" r="4" fill="${poly.color}"/>
                    <text x="${legendX + 10}" y="379" font-family="Georgia" font-size="8" fill="${poly.color}" font-weight="bold">
                        ${poly.sides}
                    </text>
                `;
                legendX += 35;
            }
            
            // Second row: 8-12 sides
            legendX = 20;
            for (let i = 5; i < 10; i++) {
                const poly = polygons[i];
                content += `
                    <circle cx="${legendX}" cy="390" r="4" fill="${poly.color}"/>
                    <text x="${legendX + 10}" y="394" font-family="Georgia" font-size="8" fill="${poly.color}" font-weight="bold">
                        ${poly.sides}
                    </text>
                `;
                legendX += 35;
            }
            
            svg.innerHTML = content;
        }
        
        function drawSameAreaComparison() {
            const svg = document.getElementById('comparison-area');
            if (!svg) return; // Safety check
            
            const centerX = 200, centerY = 200;
            const targetArea = 1.0; // Fixed area in π/6 units squared
            
            const polygons = [
                {sides: 3, color: '#e74c3c'},
                {sides: 4, color: '#f39c12'},
                {sides: 5, color: '#9b59b6'},
                {sides: 6, color: '#27ae60'},
                {sides: 7, color: '#3498db'},
                {sides: 8, color: '#e67e22'}
            ];
            
            let content = `
                <text x="200" y="25" text-anchor="middle" 
                      font-family="Georgia" font-size="12" font-weight="bold" fill="#2c3e50">
                      Same Area
                </text>
                <text x="200" y="40" text-anchor="middle" 
                      font-family="Georgia" font-size="10" fill="#666">
                      Area = 1 (π/6)² units
                </text>
            `;
            
            // Draw polygons with same area (different sizes)
            polygons.forEach((poly, index) => {
                // Calculate radius for given area
                // Area of regular polygon = (n * s²) / (4 * tan(π/n))
                // Where s = 2r * sin(π/n), so Area = (n * r² * sin²(π/n)) / tan(π/n)
                const n = poly.sides;
                const areaFactor = (n * Math.sin(Math.PI/n) * Math.sin(Math.PI/n)) / Math.tan(Math.PI/n);
                const radius = Math.sqrt(targetArea / areaFactor);
                const displayRadius = radius * 80; // Scale for display
                
                content += drawPolygon(centerX, centerY, displayRadius, poly.sides, poly.color, 2);
            });
            
            // Legend
            let legendX = 30;
            polygons.forEach((poly, index) => {
                content += `
                    <circle cx="${legendX}" cy="370" r="4" fill="${poly.color}"/>
                    <text x="${legendX + 10}" y="374" font-family="Georgia" font-size="9" fill="${poly.color}" font-weight="bold">
                        ${poly.sides}
                    </text>
                `;
                legendX += 40;
            });
            
            content += `
                <text x="200" y="390" text-anchor="middle" font-family="Georgia" font-size="9" fill="#666">
                    Same area, different perimeters
                </text>
            `;
            
            svg.innerHTML = content;
        }
        
        function generateStarPolygonTable() {
            const tbody = document.getElementById('star-table-body');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            const starData = [
                {
                    sides: 5,
                    name: 'Pentagon',
                    star: 'Pentagram',
                    rule: 'Connect every 2nd vertex',
                    ratio: (1 + Math.sqrt(5)) / 2, // Golden ratio φ
                    isGolden: true,
                    properties: 'Golden ratio φ ≈ 1.618, perfect pentagonal symmetry'
                },
                {
                    sides: 6,
                    name: 'Hexagon',
                    star: 'Hexagram',
                    rule: 'Two overlapping triangles',
                    ratio: Math.sqrt(3), // √3
                    isGolden: false,
                    properties: 'Star of David, √3 ratio ≈ 1.732'
                },
                {
                    sides: 7,
                    name: 'Heptagon',
                    star: 'Heptagram',
                    rule: 'Connect every 2nd vertex',
                    ratio: 1 / (2 * Math.sin(Math.PI/7)), // Complex ratio
                    isGolden: false,
                    properties: 'Seven-pointed star, mystical symbolism'
                },
                {
                    sides: 8,
                    name: 'Octagon',
                    star: 'Octagram',
                    rule: 'Connect every 3rd vertex',
                    ratio: Math.sqrt(2 + Math.sqrt(2)), // 8-pointed star ratio
                    isGolden: false,
                    properties: '8-pointed star, architectural patterns'
                },
                {
                    sides: 9,
                    name: 'Nonagon',
                    star: 'Enneagram',
                    rule: 'Connect every 2nd vertex',
                    ratio: 1 / (2 * Math.sin(Math.PI/9)), // 9-pointed star ratio
                    isGolden: false,
                    properties: '9-pointed star, spiritual symbolism'
                },
                {
                    sides: 10,
                    name: 'Decagon',
                    star: 'Decagram',
                    rule: 'Connect every 3rd vertex',
                    ratio: (1 + Math.sqrt(5)) / 2, // Also relates to golden ratio
                    isGolden: true,
                    properties: 'Related to golden ratio, 10-pointed star'
                },
                {
                    sides: 11,
                    name: 'Hendecagon',
                    star: 'Hendecagram',
                    rule: 'Connect every 2nd vertex',
                    ratio: 1 / (2 * Math.sin(Math.PI/11)), // 11-pointed star ratio
                    isGolden: false,
                    properties: '11-pointed star, complex geometry'
                },
                {
                    sides: 12,
                    name: 'Dodecagon',
                    star: 'Dodecagram',
                    rule: 'Connect every 5th vertex',
                    ratio: 2 + Math.sqrt(3), // 12-pointed star ratio
                    isGolden: false,
                    properties: '12-pointed star, clock face symmetry'
                }
            ];
            
            starData.forEach(data => {
                const row = document.createElement('tr');
                const isSpecial = data.isGolden;
                
                row.innerHTML = `
                    <td class="polygon-name">${data.name} (${data.sides})</td>
                    <td>${data.star}</td>
                    <td>${data.rule}</td>
                    <td>${data.ratio.toFixed(3)}</td>
                    <td class="${isSpecial ? 'special-ratio' : ''}">${data.ratio.toFixed(3)}</td>
                    <td class="${isSpecial ? 'special-ratio' : ''}">${isSpecial ? '✓ φ = 1.618...' : '—'}</td>
                    <td class="${isSpecial ? 'special-ratio' : ''}">${data.properties}</td>
                `;
                
                tbody.appendChild(row);
            });
        }
        
        function updateMeasurements(sides, circum, mode, sizeValue) {
            const radius = circum / 12;
            const sideLength = 2 * radius * Math.sin(Math.PI / sides);
            const perimeter = sides * sideLength;
            const perimeterRatio = perimeter / circum;
            const sideToRadius = sideLength / radius;
            const showStar = document.getElementById('show-star')?.checked || false;
            
            const radiusDisplay = getCleanFraction(radius);
            let circumDisplay;
            
            if (mode === 'radius') {
                circumDisplay = getCleanFraction(circum);
            } else {
                circumDisplay = circum;
            }
            
            let starInfo = '';
            if (showStar && sides >= 5) {
                let starEdgeRatio;
                let starName;
                switch(sides) {
                    case 5:
                        starEdgeRatio = (1 + Math.sqrt(5)) / 2; // Golden ratio φ
                        starName = 'Pentagram';
                        break;
                    case 6:
                        starEdgeRatio = Math.sqrt(3);
                        starName = 'Hexagram';
                        break;
                    case 7:
                        starEdgeRatio = 1 / (2 * Math.sin(Math.PI/7));
                        starName = 'Heptagram';
                        break;
                    case 8:
                        starEdgeRatio = Math.sqrt(2 + Math.sqrt(2));
                        starName = 'Octagram';
                        break;
                    case 9:
                        starEdgeRatio = 1 / (2 * Math.sin(Math.PI/9));
                        starName = 'Enneagram';
                        break;
                    case 10:
                        starEdgeRatio = (1 + Math.sqrt(5)) / 2; // Also golden ratio related
                        starName = 'Decagram';
                        break;
                    case 11:
                        starEdgeRatio = 1 / (2 * Math.sin(Math.PI/11));
                        starName = 'Hendecagram';
                        break;
                    case 12:
                        starEdgeRatio = 2 + Math.sqrt(3);
                        starName = 'Dodecagram';
                        break;
                    default:
                        starEdgeRatio = 2 * Math.sin(Math.PI * 2 / sides);
                        starName = `${sides}-pointed star`;
                }
                
                const starEdgeLength = sideLength * starEdgeRatio;
                starInfo = `<br><br><strong>${starName} Properties:</strong><br>
                • Star edge length: ${starEdgeLength.toFixed(4)} π/6 units<br>
                • Star/Regular ratio: ${starEdgeRatio.toFixed(3)}<br>
                ${sides === 5 || sides === 10 ? '<span style="color: #d4af37; font-weight: bold;">⭐ Contains Golden Ratio φ ≈ 1.618!</span>' : ''}
                ${sides === 6 ? '<span style="color: #27ae60; font-weight: bold;">⭐ Star of David, √3 ratio ≈ 1.732</span>' : ''}
                ${sides === 9 ? '<span style="color: #3498db; font-weight: bold;">⭐ Enneagram, 9-fold symmetry</span>' : ''}
                ${sides === 11 ? '<span style="color: #e67e22; font-weight: bold;">⭐ Hendecagram, prime number symmetry</span>' : ''}
                ${sides === 12 ? '<span style="color: #9b59b6; font-weight: bold;">⭐ Dodecagram, zodiac wheel symmetry</span>' : ''}`;
            }
            
            document.getElementById('measurements').innerHTML = `
                <strong>Current ${polygonNames[sides]} Measurements:</strong><br>
                • Circle circumference: ${circumDisplay} π/6 units<br>
                • Circle radius: ${radiusDisplay} π/6 units<br>
                • Polygon side length: ${sideLength.toFixed(4)} π/6 units<br>
                • Side/Radius ratio: ${sideToRadius.toFixed(3)}<br>
                • Polygon perimeter: ${perimeter.toFixed(4)} π/6 units<br>
                • Perimeter/Circumference: ${perimeterRatio.toFixed(3)} (${(perimeterRatio*100).toFixed(1)}%)
                ${sides === 6 ? '<br><span style="color: #e74c3c; font-weight: bold;">⭐ Special: Side length exactly equals radius!</span>' : ''}
                ${starInfo}
            `;
        }
        
        // Initialize
        window.onload = function() {
            showSection('table');
        };
    </script>
</body>
</html>